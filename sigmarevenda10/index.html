<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigma Recharge - Sistema de Recarga de Créditos</title>
    
    <!-- CSS Modular -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/components.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>Sigma Recharge</h1>
            <p>Sistema de Recarga de Créditos</p>
        </div>

        <div id="error" class="error-message"></div>
        <div id="success" class="success-message"></div>

        <!-- STEP 1: Verificação de Acesso -->
        <div id="step1" class="step active">
            <div class="form-group">
                <label id="accessQuestion">Carregando...</label>
                <input type="text" id="accessAnswer" placeholder="Digite a resposta">
            </div>
            <button id="verifyAccessBtn">Verificar Acesso</button>
        </div>

        <!-- STEP 2: Login do Revendedor -->
        <div id="step2" class="step">
            <div class="form-group">
                <label>Username do Revendedor</label>
                <input type="text" id="resellerUsername" placeholder="Digite seu username">
            </div>
            <button id="resellerLoginBtn">Entrar</button>
            <button id="backToStep1Btn" class="btn-secondary">Voltar</button>
        </div>

        <!-- STEP 3: Seleção de Pacote -->
        <div id="step3" class="step">
            <div class="info-box">
                <strong>Bem-vindo, <span id="welcomeUsername"></span>!</strong><br>
                Painel: <span id="welcomePanel"></span>
            </div>

            <label>Selecione o Pacote de Créditos:</label>
            <div id="packagesList"></div>

            <button id="selectPackageBtn" disabled>Continuar para Pagamento</button>
            <button id="goToDashboardBtn" class="btn-success">Ver Dashboard</button>
            <button id="logoutBtn" class="btn-secondary">Sair</button>
        </div>

        <!-- STEP 4: Pagamento -->
        <div id="step4" class="step">
            <h2>Pagamento PIX</h2>
            
            <div class="info-box">
                <strong>Pacote:</strong> <span id="paymentCredits"></span> créditos<br>
                <strong>Valor:</strong> R$ <span id="paymentAmount"></span>
            </div>

            <div class="qr-code-container">
                <img id="qrCodeImage" src="" alt="QR Code PIX">
                <div class="timer">Aguardando pagamento...</div>
                <div id="paymentTimer" class="timer"></div>
            </div>

            <div class="pix-code">
                <small>Código PIX Copia e Cola:</small><br>
                <span id="pixCode"></span>
            </div>

            <button id="copyPixBtn" class="btn-success">Copiar Código PIX</button>
            <button id="cancelPaymentBtn" class="btn-danger">Cancelar</button>
        </div>

        <!-- STEP 5: Pagamento Confirmado -->
        <div id="step5" class="step">
            <div class="success-container">
                <div class="success-icon">✅</div>
                <h2>Pagamento Confirmado!</h2>
                <p>Seus créditos foram adicionados com sucesso!</p>
                <button id="viewDashboardBtn">Ver Dashboard</button>
                <button id="newPurchaseBtn" class="btn-primary">Nova Compra</button>
            </div>
        </div>

        <!-- STEP 6: Dashboard -->
        <div id="step6" class="step">
            <h2>Dashboard</h2>
            
            <div id="dashboardStats"></div>
            
            <h3>Últimas Compras</h3>
            <div id="dashboardPayments"></div>

            <button id="newPurchaseFromDashboardBtn">Nova Compra</button>
            <button id="logoutFromDashboardBtn" class="btn-secondary">Sair</button>
        </div>

        <div class="admin-link">
            <a href="/admin.html">Área Administrativa</a>
        </div>
    </div>

    <!-- JS Modular -->
    <script src="/js/shared/utils.js"></script>
    <script src="/js/shared/api.js"></script>
    <script src="/js/shared/components.js"></script>
    <script src="/js/client/auth.js"></script>
    <script src="/js/client/packages.js"></script>
    <script src="/js/client/payment.js"></script>
    <script src="/js/client/dashboard.js"></script>
    <script src="/js/client/app.js"></script>
</body>
</html>
